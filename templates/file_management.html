{% extends "base.html" %} {% block content %}
<div class="file-management">
  <h2 class="file-management__title">File Management</h2>

  <div class="file-management__settings">
    <h3 class="file-management__settings-title">Settings</h3>

    <label class="file-management__settings-label">Chunk Size:</label>
    <input
      type="range"
      id="chunkSize"
      class="file-management__settings-input"
      min="500"
      max="2000"
      value="{{ settings.chunk_size }}"
    />
    <span id="chunkSizeValue" class="file-management__settings-value"
      >{{ settings.chunk_size }}</span
    ><br />

    <label class="file-management__settings-label">Embedding Model:</label>
    <input
      type="text"
      id="embeddingModel"
      class="file-management__settings-input"
      value="{{ settings.embedding_model }}"
    /><br />

    <label class="file-management__settings-label">Data Directory:</label>
    <input
      type="text"
      id="dataDir"
      class="file-management__settings-input"
      value="{{ settings.data_dir }}"
    /><br />

    <label class="file-management__settings-label">Database Directory:</label>
    <input
      type="text"
      id="dbDir"
      class="file-management__settings-input"
      value="{{ settings.db_dir }}"
    /><br />

    <button class="button button--primary" onclick="updateSettings()">
      Save Settings
    </button>
  </div>

  <div class="file-management__upload">
    <h3 class="file-management__upload-title">Upload New File</h3>
    <input type="file" id="fileInput" class="file-management__upload-input" />
    <button class="button button--success" onclick="uploadFile()">
      Upload
    </button>
    <p id="uploadStatus" class="file-management__upload-status"></p>
  </div>

  <div class="file-management__files">
    <h3 class="file-management__files-title">Current Files</h3>
    <ul id="fileList" class="file-management__file-list">
      {% for file in files %}
      <li class="file-management__file-item">
        {{ file }}
        <button
          class="button button--danger"
          onclick="deleteFile('{{ file }}')"
        >
          Delete
        </button>
      </li>
      {% endfor %}
    </ul>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const chunkSizeSlider = document.getElementById("chunkSize");
      const chunkSizeValue = document.getElementById("chunkSizeValue");

      chunkSizeValue.textContent = chunkSizeSlider.value;

      chunkSizeSlider.addEventListener("input", function () {
        chunkSizeValue.textContent = chunkSizeSlider.value;
      });
    });
  </script>
</div>
{% endblock %}
